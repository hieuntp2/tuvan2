@{
    ViewBag.Title = "Bài viết";
    Layout = "~/Views/Shared/_Layout.v2.cshtml";
}
<script src="~/scripts/angularjs/baivietindex.js"></script>
<h3>Bài viết gần đây</h3>

<div class="row" ng-app="homepage">
    <div class="col-lg-12">
        <ul class="timeline" ng-controller="indexcontroller as controller" ng-init="controller.init()" id="_home_content">
            <!-- timeline item -->
            <li style="cursor:pointer;" ng-repeat="post in controller.posts" ng-click="controller.postclick(post.id, post.loai)">
                <i ng-class="post.loai === 'q'? 'ion ion-chatbubbles bg-green': 'ion ion-compose bg-red'"></i>
                <div class="timeline-item">
                    <span class="time"> <i class="fa fa-clock-o"></i> {{post.ngaydang}} </span>
                    <h3 class="timeline-header">
                        <img style="width:50px; height:50px;" ng-src="{{post.avatar}}" class="img-circle" alt="User Image">
                        <b>{{post.tieude}}</b>
                    </h3>

                    <div class="timeline-body">
                        {{post.noidung}}
                    </div>
                </div>
            </li>
            <!-- END timeline item -->
            <li>
                <i class="fa fa-clock-o bg-gray"></i>
            </li>
        </ul>
    </div>
</div>

<script>
    function baivietclick(id) {
        window.location.href = "/baiviets/details/" + id;
    }

    // code
    var _current_page = 0;
    $(function () {
        $(window).scroll(function () {
            if ($(document).height() - 2000 == $(window).scrollTop() + $(window).height()) {

                if (count > 0) {
                }
                else {
                    _current_page += 1;
                    count = 5;
                    angular.element($('#_home_content')).scope().addpost(_current_page);
                }
            }
        });
    });

    // function countdown time
    var count = 5;

    var counter = setInterval(timer, 500); //1000 will  run it every 1 second

    function timer() {
        count = count - 1;
        if (count <= 0) {
            clearInterval(counter);
            //counter ended, do something here
            return;
        }

        //Do code for showing the number of seconds here
    }
    // End function countdown time
</script>
